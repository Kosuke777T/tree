母豚成績評価ルール Ver.1（里子+/−対応・離乳最優先）
0. Excelの里子の定義

里子数 F は ±で記録

F > 0：もらった（自分が育てた子が増える）

F < 0：出した（自分の子を他へ出した）

1. 産歴別に基礎指標を作る（まず“自分の子”を作る）

各分娩（産次）について、次を計算して列を作る。

1-1. 自分の子の離乳頭数（最重要）

自分の子をどれだけ離乳まで残したかを表す主指標。

離乳頭数 W

里子数 F（±）

自分の子離乳：

OWN_W = W − F


意味：

里子を「もらった」(F>0) 分だけ、他人の子が混ざるので差し引く

里子を「出した」(F<0) 場合は、自分の子が自分の欄から減ってるので足し戻される（−Fが＋になる）

これで「なるべく自分の子が多いほど高得点」が実現できます。

1-2. 自分の子比率（里子で盛ってないかチェック）
OWN_RATE = OWN_W ÷ W     （W=0は欠損扱い）


1に近いほど「自分の子中心」

里子を大量にもらってWを稼ぐとOWN_RATEが落ちる

※これは主点ではなく、後で“微ペナルティ/微ボーナス”に使うのが安全。

2. 産歴別標準化（zスコア化）

評価はすべて 産歴kごとに平均・標準偏差を出して標準化。

対象指標（この順が重要度順）：

OWN_W（自分の子離乳）※最優先

生存産子数（LIVE_BORN）

総産子数（TOTAL_BORN）

死産数（STILLBORN）※少ないほど良い

OWN_RATE（任意・弱く効かせる）

zスコア：

z = (値 − 産歴平均との差) ÷ 産歴の標準偏差


死産だけ符号反転：

z_still = − (死産数 − 平均) ÷ SD

3. Shrinkage（縮小補正）

母豚ごとの「産歴回数 n」が少ないとき過大評価しない。

shrink = n ÷ (n + α)
補正z = z × shrink


推奨 α=3（まず固定で運用）

4. 産歴ごとの総合スコア（優先順位を“重み”で固定）

あなたの希望する優先順位：

離乳（多い） ＞ 生存産子（多い） ＞ 総産子（多い） ＞ 死産（少ない） ＞ 里子は自分の子が多い

これを重みで実装します（例。最初はこれで十分）：

OWN_W：0.45

LIVE_BORN：0.25

TOTAL_BORN：0.15

STILLBORN(反転)：0.10

OWN_RATE：0.05（弱く）

産歴kのスコア：

ParityScore_k =
  0.45*z(OWN_W)
+ 0.25*z(LIVE_BORN)
+ 0.15*z(TOTAL_BORN)
+ 0.10*z(STILLBORN反転)
+ 0.05*z(OWN_RATE)


（それぞれShrinkage後のzを使う）

※OWN_RATEは「里子で盛ってない」方向にだけ効かせるので、強くしないのがコツです。

5. 母豚レベルの3軸（前の案をそのまま適用）

Peak：2〜3産の ParityScore 平均

Stability：ParityScore のバラつき（小さいほど良いので符号反転）

Sustain：後半−前半（落ちにくいほど良い）

総合：

TotalScore =
  Peak*0.4 + Stability*0.3 + Sustain*0.3

6. 里子の扱いに関する運用ルール（重要）

主戦場は OWN_W（自分の子離乳）
→ 里子でWを増やしても点が盛れない

OWN_RATEは弱い監視役
→ 里子が多い母豚を“同点のときに下げる”程度の効き

これで、

離乳頭数重視

生存・総産も評価

死産はきっちりマイナス

里子は「自分の子が多い」ほど有利
が同時に満たせます。